.\" Version: 1.001
.\"
.TH SAPHanaSR-alert 7 "12 Jun 2024" "" "SAPHanaSR"
.\" TODO SAPHanaSR-alert-fencing ?
.\"
.SH NAME
SAPHanaSR-alert \- Alert agent for cluster fencing alerts.
.PP
.\"
.SH DESCRIPTION
SAPHanaSR-alert can be used to react on Linux cluster fencing alerts.

The Linux cluster provides  TODO

SAPHanaSR-agent is used to fence all nodes of an HANA site, in case one of
them gets fenced. This improves three use cases for HANA scale-out:
.br
- HA/DR provider hook script susChkSrv.py action_on_lost=fence
.br
- resource agent SAPHanaController ON_FAIL_ACTION=fence
.br
- resource agent SAPHanaFilesystem ON_FAIL_ACTION=fence
.br
See also manual pages ocf_sus_SAPHanaController(7), ocf_suse_SAPHanaFilesystem(7)
and susChkSrv.py(7).
.PP
When  the Linux cluster has performed a node fencing, it calls SAPHanaSR-agent
on each active cluster node. The agent checks whether the local node belongs to
the same HANA site as the fenced node. If so, it asks the cluster to fence the
local node as well.
.PP
.\"
.\" .SH SUPPORTED PARAMETERS
.\" .PP
.\" Alert meta option
.\" TODO timeout default 30s "meta timeout=30s" 
.\"
.PP
.\"
.SH RETURN CODES
.B 0
Successful program execution.
.br
.B >0
Usage, syntax or execution errors.
.br
In addition log entries are written, which can be scanned by using a pattern
like "SAPHanaSR-alert".
.PP
.\"
.SH EXAMPLES
.PP
\fB*\fR Example configuration for the fencing alert handler.
.PP
The following line needs to be added to the clusterÂ´s CIB:
.PP
.RS 2
alert fencing-1 "/usr/bin/SAPHanaSR-alert" select fencing
.RE
.PP
\fB*\fR Example for configuring the alert agent by using crm.
.PP
Alternate way for configuring the alert agent.
.PP
.RS 2
# crm configure alert fencing-1 "/usr/bin/SAPHanaSR-alert" select fencing
.RE
.PP
\fB*\fR Example for showing all configured alert agents.
.PP
.RS 2
# crm configure show | grep -A1 alert
.RE
.PP
\fB*\fR Example for showing agent messages.
.PP
.RS 2
# grep SAPHanaSR-alert /var/log/messages
.RE
.PP
.\"
.SH FILES
.TP
/usr/bin/SAPHanaSR-alert
the alert agent
.TP
/run/crm/SAPHanaSR_site_cache
the internal cache for host to site relation - do not touch this file
.PP
.\"
.SH REQUIREMENTS
1. Pacemaker 2.1 or newer.
.PP
2. SAP HANA scale-out performance-optimized scenario.
.PP
3. Only one SID controlled by the Linux cluster.
.PP
4. No other alert agent should be configured for the fencing alert.
.PP
5. Automatic re-start on just fenced nodes should be disabled. See manual page
sbd(8) for details.
.PP
6. The alert agent runtime almost completely depends on call-outs to OS and
Linux cluster.
.\"
.SH BUGS
In case of any problem, please use your favourite SAP support process to open
a request for the component BC-OP-LNX-SUSE.
Please report any other feedback and suggestions to feedback@suse.com.
.PP
.\"
.SH SEE ALSO
\fBSAPHanaSR-angi\fP(7) , \fBSAPHanaSR-ScaleOut\fP(7) ,
\fBocf_suse_SAPHanaController\fP(7) , \fBocf_suse_SAPHanaFilesystem\fP(7) ,
\fBsusChkSrv.py\fP (7) , \fBcrm\fP(8)
.PP
.\"
.SH AUTHORS
F.Herschel, L.Pinne.
.PP
.\"
.SH COPYRIGHT
.br
(c) 2024 SUSE LLC
.br
SAPHanaSR-alert comes with ABSOLUTELY NO WARRANTY.
.br
For details see the GNU General Public License at
http://www.gnu.org/licenses/gpl.html
.\"
